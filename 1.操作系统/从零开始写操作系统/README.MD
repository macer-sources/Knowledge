# 动手写操作系统



## 具体步骤 
1. 编译 
2. 生成内核文件 
    将编译生成的可执行文件数据写入到软盘的第一扇区  
3. 运行 
    qumu 
    bochs 



## 要求 
1. 会 x86 汇编 
2. 会 c 语言
3. 会 linux 



## 环境搭建 
1. vs code 
    编写code
2. virtualbox
    运行 centos
3. centos 
    编译自己实现的操作系统 
4. qemu
    运行操作系统(可调试)  










## 项目的根本 
1. 写操作系统到底写什么  
    主板在运行os 的时候，默认从 MBR(0柱面0磁道1扇区的位置) 读取数据，执行权交给 MBR 区域的代码
    MBR 扇区： 
        大小是 512 字节， 整个扇区尾部的两个字节 `55 aa` 
    * 主板的那个部分负责加载内核 
    * 它怎么知道内核在软盘的那个位置 
    * 加载到哪里？ 
2. cpu 的两种运行模式： 实模式、保护模式、虚拟8086 

3. 借助 bios 中断向屏幕输出内容 
4. 自己写的内存存放位置？ 
    实模式下的内存布局 
5. NASM 汇编脚本





## 项目实现的过程问题  
1. 写内核项目的创建、汇编脚本怎么写 

    代码段
        .text
    数据段 
        赋值的全局数据区        .data 
        未赋值的全局数据区      .bss

    nasm 汇编项目 
    伪指令： org、 section、bits 
    特殊符号： $、$$   

    org: 定义一个锚点
2. 生成内核文件 
3. 执行的细节 
    qemu 
    bochs 







## 参考 
1. 30 天自制操作系统 
2. 操作系统真像还原 
3. 一个 64 位操作系统的设计与实现 
4. orange`s: 一个操作系统的实现